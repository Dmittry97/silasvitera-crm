# –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤

## üîí –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É
   - –¢–æ–≤–∞—Ä—ã –ø–æ–∫–∞ –Ω–µ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã

2. **–ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∑–∞–∫–∞–∑–∞
   - –ù–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑"

3. **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤**
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—Ä–æ–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –Ω–∞ 20 –º–∏–Ω—É—Ç
   - –¢–æ–≤–∞—Ä—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ `isReserved: true`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è –±—Ä–æ–Ω–∏ `reservedUntil`
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `reservedBy`

4. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–∫–Ω–æ —Å QR-–∫–æ–¥–æ–º –¥–ª—è –æ–ø–ª–∞—Ç—ã
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞ (20 –º–∏–Ω—É—Ç)
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã

5. **–í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

   **–ê. –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–Ø –æ–ø–ª–∞—Ç–∏–ª"
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–∫–∞–∑ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `paid`
   - –ë—Ä–æ–Ω—å —Å–Ω–∏–º–∞–µ—Ç—Å—è
   - –¢–æ–≤–∞—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–∞–∑–µ, –Ω–æ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –ø—Ä–æ–¥–∞–Ω–Ω—ã–µ
   - –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–∞–µ—Ç—Å—è

   **–ë. –û—Ç–º–µ–Ω–∞ –æ–ø–ª–∞—Ç—ã:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–º–µ–Ω–∏—Ç—å"
   - –ë—Ä–æ–Ω—å —Å–Ω–∏–º–∞–µ—Ç—Å—è
   - –¢–æ–≤–∞—Ä—ã —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏

   **–í. –ò—Å—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏:**
   - –¢–∞–π–º–µ—Ä –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 0
   - –ë—Ä–æ–Ω—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è
   - –¢–æ–≤–∞—Ä—ã —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã

## üìã –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

### –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏–º–µ—é—Ç –±–µ–π–¥–∂ "üîí –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ" –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- –ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π

### –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞
- –í–º–µ—Å—Ç–æ –∫–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
  ```
  üîí –¢–æ–≤–∞—Ä –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω
  ```
- –ö–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –∏ –∏–º–µ–µ—Ç —è–Ω—Ç–∞—Ä–Ω—ã–π —Ü–≤–µ—Ç

### –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –æ–ø–ª–∞—Ç—ã
- –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞: `19:45`
- QR-–∫–æ–¥ –¥–ª—è –æ–ø–ª–∞—Ç—ã (–∑–∞–≥–ª—É—à–∫–∞)
- –†–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –ö–Ω–æ–ø–∫–∏ "–û—Ç–º–µ–Ω–∏—Ç—å" –∏ "‚úì –Ø –æ–ø–ª–∞—Ç–∏–ª"

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend API

**–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä:**
```
POST /api/products/:id/reserve
Body: { userId: string }
```

**–°–Ω—è—Ç—å –±—Ä–æ–Ω—å:**
```
POST /api/products/:id/unreserve
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:**
- –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è cron-–∑–∞–¥–∞—á–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å `isReserved: true`
- –ï—Å–ª–∏ `reservedUntil < now`, —Å–Ω–∏–º–∞–µ—Ç –±—Ä–æ–Ω—å

### Frontend

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è User ID:**
```typescript
const userId = 'user_' + Math.random().toString(36).substr(2, 9);
localStorage.setItem('user_id', userId);
```

**–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏:**
```typescript
await Promise.all(
  cart.map(item => axios.post(`/api/products/${item.id}/reserve`, { userId }))
);
```

**–°–Ω—è—Ç–∏–µ –±—Ä–æ–Ω–∏ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ:**
```typescript
await Promise.all(
  cart.map(item => axios.post(`/api/products/${item.id}/unreserve`))
);
```

## ‚è±Ô∏è –¢–∞–π–º–µ—Ä—ã

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 20 –º–∏–Ω—É—Ç (1200 —Å–µ–∫—É–Ω–¥)
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** `reservedUntil = new Date() + 20 –º–∏–Ω—É—Ç`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- **–¢–∞–π–º–µ—Ä:** –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç –æ—Ç 20:00 –¥–æ 0:00
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
- **–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ 0:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
```typescript
if (product.isReserved && product.reservedUntil > new Date()) {
  throw new Error('Product is already reserved');
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –±—Ä–æ–Ω–µ–π
- –ï—Å–ª–∏ –±—Ä–æ–Ω—å –∏—Å—Ç–µ–∫–ª–∞, –Ω–æ —Ñ–ª–∞–≥ `isReserved` –µ—â–µ true
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç –±—Ä–æ–Ω—å
- –¢–æ–≤–∞—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –Ω–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### Product Schema
```typescript
{
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  isReserved: Boolean,        // –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ç–æ–≤–∞—Ä
  reservedUntil: Date,        // –î–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω
  reservedBy: String          // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–≤—à–µ–≥–æ
}
```

### Order Schema
```typescript
{
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  status: String,             // 'pending' | 'paid' | 'processing' | 'shipped' | 'delivered' | 'cancelled'
}
```

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
3. –¢–æ–≤–∞—Ä –±—Ä–æ–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 20 –º–∏–Ω—É—Ç
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –≤–∏–¥–∏—Ç —Ç–æ–≤–∞—Ä –∫–∞–∫ "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ"
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç
6. –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è, –±—Ä–æ–Ω—å —Å–Ω–∏–º–∞–µ—Ç—Å—è
7. –¢–æ–≤–∞—Ä –±–æ–ª—å—à–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π (–ø—Ä–æ–¥–∞–Ω)

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û—Ç–º–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –±—Ä–æ–Ω–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä
2. –ü–µ—Ä–µ–¥—É–º—ã–≤–∞–µ—Ç –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–º–µ–Ω–∏—Ç—å"
3. –ë—Ä–æ–Ω—å —Å–Ω–∏–º–∞–µ—Ç—Å—è
4. –¢–æ–≤–∞—Ä —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—Å–µ—Ö

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò—Å—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –±—Ä–æ–Ω–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä
2. –ù–µ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 20 –º–∏–Ω—É—Ç
3. –¢–∞–π–º–µ—Ä –∏—Å—Ç–µ–∫–∞–µ—Ç, –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
4. Cron-–∑–∞–¥–∞—á–∞ —Å–Ω–∏–º–∞–µ—Ç –±—Ä–æ–Ω—å
5. –¢–æ–≤–∞—Ä —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è production
1. **JWT —Ç–æ–∫–µ–Ω—ã** –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ userId
2. **WebSocket** –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ–≤–∞—Ä–æ–≤
3. **Redis** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–æ–Ω–µ–π
4. **Email/SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
6. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –±—Ä–æ–Ω–µ–π –≤ –ø–æ–∫—É–ø–∫–∏

### –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX
1. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –±—Ä–æ–Ω–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –±—Ä–æ–Ω–∏
3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–ª–∏—Ç—å –±—Ä–æ–Ω—å
4. –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–µ–π –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

## üêõ Troubleshooting

### –¢–æ–≤–∞—Ä –Ω–µ –±—Ä–æ–Ω–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–≤–∞—Ä –Ω–µ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –ë—Ä–æ–Ω—å –Ω–µ —Å–Ω–∏–º–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ cron-–∑–∞–¥–∞—á–∞ –∑–∞–ø—É—â–µ–Ω–∞ –≤ `main.ts`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend

### –¢–∞–π–º–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `PaymentModal` –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ props
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `useEffect` —Å —Ç–∞–π–º–µ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ JavaScript
